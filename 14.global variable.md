# 변수의 생명 주기

-   변수는 자신이 선언된 위치에서 생성되고 소멸
-   전역변수는 애플리케이션의 생명 주기와 같다

    -   애플리케이션을 종료하지 않는 한 영원히 메모리 공간을 점유
    -   var 키워드로 선언한 전역 변수는 전역 객체의 프로퍼티가 됨
        -   전역 객체 : 코드가 실행되기 이전 단계에 자바스크립트 엔진에 의해 어떤 객체보다도 먼저 생성되는 특수한 객체
            -   브라우저에서는 window, Node.js에서는 global 객체
            -   표준 빌트인 객체, var 변수 등을 갖고 있음
        -   var 키워드로 선언한 전역 변수의 생명주기는 전역 객체와 같다

-   함수 내부 선언된 지역 변수는 함수가 호출되면 생성되고 종료하면 소멸
    -   함수 내부에서 변수 호이스팅으로 선언되고 런타임으로 할당
        -   호이스팅은 스코프 단위로 동작
        -   누군가 스코프를 참조하고 있으면 변수 또한 유효

# 전역 변수의 문제점

-   어디서든 참조하고 할당할 수 있는 변수
    -   전역 변수가 어디서든 참조, 변경되는 암묵적 결합을 허용하는 것
    -   변수의 유효 범위가 커져 코드의 가독성이 나빠짐
    -   의도치 않은 상태 변경 위험성
-   긴 생명 주기
    -   메모리 리소스를 오랜 기간 소비
-   스코프 체인 상 종점
    -   검색의 마지막 지점
        -   속도가 느려짐
-   네임 스페이스 오염
    -   다른 파일 내 동일한 이름 전역 변수도 같은 전역 스코프를 공유
        -   오류 발생 위험이 커짐

# 전역 변수 사용을 억제하는 방법

-   지역 변수를 사용
-   변수의 스코프는 좁을수록 좋음

1.  즉시 실행 함수

```
(function () {
    var foo = 10;
    ...
}());
```

-   즉시 실행 함수의 지역 변수가 됨

2.  네임스페이스 객체

```
var MYAPP = {};

MYAPP.name = 'Lee'
```

-   전역 네임스페이스 객체를 생성 - 유용해 보이진 않음

3.  모듈 패턴

```
var Counter = (function () {
    var num = 0;

    return {
        ...
    }
})
```

4.  ES6 모듈

```
<script type = 'module' src='...'></script>
```

-   모듈 파일의 확장자는 .mjs 권장
-   웹팩 등의 모듈 번들러를 사용하는 것이 일반적
